"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[1993],{13634:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var s=t(74848),r=t(28453);const o={},i=void 0,l={id:"frontend/vue3/vueuse",title:"vueuse",description:"Get Started",source:"@site/docs/00200-frontend/vue3/050-vueuse.md",sourceDirName:"00200-frontend/vue3",slug:"/frontend/vue3/vueuse",permalink:"/dddtdd-docs/frontend/vue3/vueuse",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:50,frontMatter:{},sidebar:"docSidebar",previous:{title:"Comparisons with Other Test Runners",permalink:"/dddtdd-docs/frontend/vue3/vitest/comparisons"},next:{title:"element-plus",permalink:"/dddtdd-docs/frontend/vue3/element-plus/"}},c={},a=[{value:"Get Started",id:"get-started",level:2},{value:"Best Practice",id:"best-practice",level:2},{value:"Destructuring",id:"destructuring",level:3},{value:"Side-effect Clean Up",id:"side-effect-clean-up",level:3},{value:"Passing Ref as Argument",id:"passing-ref-as-argument",level:3},{value:"Configurations",id:"configurations",level:2},{value:"Event Filters",id:"event-filters",level:3},{value:"Guidelines",id:"guidelines",level:2},{value:"General",id:"general",level:3},{value:"ShallowRef",id:"shallowref",level:3},{value:"Watch Options",id:"watch-options",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"get-started",children:"Get Started"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i @vueuse/core\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { useLocalStorage, useMouse, usePreferredDark } from '@vueuse/core'\n\nexport default {\n  setup() {\n    // tracks mouse position\n    const { x, y } = useMouse()\n\n    // is user prefers dark theme\n    const isDark = usePreferredDark()\n\n    // persist state in localStorage\n    const store = useLocalStorage(\n      'my-storage',\n      {\n        name: 'Apple',\n        color: 'red',\n      },\n    )\n\n    return { x, y, isDark, store }\n  },\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practice",children:"Best Practice"}),"\n",(0,s.jsx)(n.h3,{id:"destructuring",children:"Destructuring"}),"\n",(0,s.jsxs)(n.p,{children:["Most of the functions in VueUse ",(0,s.jsx)(n.strong,{children:"return an object of refs"})," that you can use ES6's object ",(0,s.jsx)(n.strong,{children:"destructure syntax"})," on to take what you need"]}),"\n",(0,s.jsx)(n.h3,{id:"side-effect-clean-up",children:"Side-effect Clean Up"}),"\n",(0,s.jsxs)(n.p,{children:["Similar to Vue's watch and computed that will be disposed when the component is unmounted, VueUse's functions also ",(0,s.jsx)(n.strong,{children:"clean up the side-effects automatically"})]}),"\n",(0,s.jsx)(n.h3,{id:"passing-ref-as-argument",children:"Passing Ref as Argument"}),"\n",(0,s.jsxs)(n.p,{children:["In Vue, we use the ",(0,s.jsx)(n.code,{children:"setup()"}),' function to construct the "connections" between the data and logics.\n',(0,s.jsx)(n.strong,{children:"To make it flexible"}),", most of the VueUse function also ",(0,s.jsx)(n.strong,{children:"accpets ref"})," version of the arguments"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const isDark = useDark()\nconst title = computed(() => isDark.value ? '\ud83c\udf19 Good evening!' : '\u2600\ufe0f Good morning!')\n\nuseTitle(title)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configurations",children:"Configurations"}),"\n",(0,s.jsx)(n.h3,{id:"event-filters",children:"Event Filters"}),"\n",(0,s.jsxs)(n.p,{children:["From v4.0, we provide the Event Filters system to give the flexibility to ",(0,s.jsx)(n.strong,{children:"control when events will get triggered"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { debounceFilter, throttleFilter, useLocalStorage, useMouse } from '@vueuse/core'\n\n// changes will write to localStorage with a throttled 1s\nconst storage = useLocalStorage('my-key', { foo: 'bar' }, { eventFilter: throttleFilter(1000) })\n\n// mouse position will be updated after mouse idle for 100ms\nconst { x, y } = useMouse({ eventFilter: debounceFilter(100) })\n"})}),"\n",(0,s.jsx)(n.h2,{id:"guidelines",children:"Guidelines"}),"\n",(0,s.jsx)(n.h3,{id:"general",children:"General"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"ref"})," instead ",(0,s.jsx)(n.code,{children:"reactive"})," whenever possible"]}),"\n",(0,s.jsx)(n.li,{children:"Use options object as arguments whenever possible to be more flexible for future extensions"}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"shallowRef"})," instead of ref when wrapping large amounts of data"]}),"\n",(0,s.jsxs)(n.li,{children:["When using ",(0,s.jsx)(n.code,{children:"watch"})," or ",(0,s.jsx)(n.code,{children:"watchEffect"})," internally, also make the ",(0,s.jsx)(n.code,{children:"immediate"})," and ",(0,s.jsx)(n.code,{children:"flush"})," options configurable whenever possible"]}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"tryOnUnmounted"})," to clear the side-effects gracefully"]}),"\n",(0,s.jsx)(n.li,{children:"When the function is asynchronous, return a PromiseLike"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"shallowref",children:"ShallowRef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"export function useFetch<T>(url: MaybeRef<string>) {\n  // use `shallowRef` to prevent deep reactivity\n  const data = shallowRef<T | undefined>()\n  const error = shallowRef<Error | undefined>()\n\n  fetch(unref(url))\n    .then(r => r.json())\n    .then(r => data.value = r)\n    .catch(e => error.value = e)\n\n  /* ... */\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"watch-options",children:"Watch Options"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import type { WatchOptions } from 'vue-demi'\n\n// extend the watch options\nexport interface WatchDebouncedOptions extends WatchOptions {\n  debounce?: number\n}\n\nexport function watchDebounced(\n  source: any,\n  cb: any,\n  options: WatchDebouncedOptions = {},\n): WatchStopHandle {\n  return watch(\n    source,\n    () => { /* ... */ },\n    options, // pass watch options\n  )\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(96540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);