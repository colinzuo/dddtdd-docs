"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[64034],{68435:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var t=o(74848),i=o(28453);const s={},c="Connect to MongoDB",r={id:"middleware/mongo/pymongo/connect",title:"Connect to MongoDB",description:"Create a MongoClient",source:"@site/docs/00600-middleware/mongo/pymongo/020-connect.md",sourceDirName:"00600-middleware/mongo/pymongo",slug:"/middleware/mongo/pymongo/connect",permalink:"/dddtdd-docs/middleware/mongo/pymongo/connect",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1734870983e3,sidebarPosition:20,frontMatter:{},sidebar:"docSidebar",previous:{title:"Get Started with PyMongo",permalink:"/dddtdd-docs/middleware/mongo/pymongo/get-started"},next:{title:"Databases and Collections",permalink:"/dddtdd-docs/middleware/mongo/pymongo/databases-collections"}},d={},l=[{value:"Create a MongoClient",id:"create-a-mongoclient",level:2},{value:"Connection URI",id:"connection-uri",level:3},{value:"MongoClient",id:"mongoclient",level:3},{value:"Specify Connection Options",id:"specify-connection-options",level:2},{value:"Limit Server Execution Time",id:"limit-server-execution-time",level:2},{value:"timeout() Method",id:"timeout-method",level:3},{value:"timeoutMS Connection Option",id:"timeoutms-connection-option",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"connect-to-mongodb",children:"Connect to MongoDB"}),"\n",(0,t.jsx)(n.h2,{id:"create-a-mongoclient",children:"Create a MongoClient"}),"\n",(0,t.jsx)(n.h3,{id:"connection-uri",children:"Connection URI"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"mongodb://"})," Required. A prefix that identifies this as a string in the standard connection format."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"username:password"})," Optional. Authentication credentials. If you include these, the client authenticates the user against the database specified in authSource. For more information about the authSource connection option, see Authentication Mechanisms."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"host[:port]"})," Required. The host and optional port number where MongoDB is running. If you don't include the port number, the driver uses the default port, 27017."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/defaultauthdb"})," Optional. The authentication database to use if the connection string includes username",":password","@ authentication credentials but not the authSource option. If you don't include this component, the client authenticates the user against the admin database."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"?<options>"})," Optional. A query string that specifies connection-specific options as ",(0,t.jsx)(n.code,{children:"<name>=<value>"})," pairs. See Specify Connection Options for a full description of these options."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"mongoclient",children:"MongoClient"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'from pymongo import MongoClient\r\n\r\nuri = "mongodb://localhost:27017/"\r\nclient = MongoClient(uri)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"specify-connection-options",children:"Specify Connection Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'uri = "mongodb://<hostname>:<port>/?connectTimeoutMS=60000&tls=true"\r\nclient = pymongo.MongoClient(uri)\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'uri = "mongodb://<hostname>:<port>"\r\nclient = pymongo.MongoClient(uri, connectTimeoutMS=60000, tls=True)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"limit-server-execution-time",children:"Limit Server Execution Time"}),"\n",(0,t.jsxs)(n.p,{children:["When you use PyMongo to perform a server operation, you can also limit the amount of time the server has to finish this operation. To do so, specify a ",(0,t.jsx)(n.strong,{children:"client-side operation timeout"}),". The timeout applies ",(0,t.jsx)(n.strong,{children:"all steps"})," needed to complete the operation, including server selection, connection checkout, serialization, and server-side execution"]}),"\n",(0,t.jsx)(n.h3,{id:"timeout-method",children:"timeout() Method"}),"\n",(0,t.jsxs)(n.p,{children:["The timeout you specify ",(0,t.jsx)(n.strong,{children:"applies to all operations"})," inside the with block"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'with pymongo.timeout(10):\r\n    coll.insert_one({"name": "Yngwie"})\r\n    coll.find_one({"name": "Yngwie"})\n'})}),"\n",(0,t.jsx)(n.h3,{id:"timeoutms-connection-option",children:"timeoutMS Connection Option"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'client = pymongo.MongoClient("mongodb://<db_username>:<db_password>@<hostname:<port>",\r\n                             timeoutMS=10000)\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'uri = "mongodb://<db_username>:<db_password>@<hostname:<port>/?timeoutMS=10000"\r\nclient = pymongo.MongoClient(uri)\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>r});var t=o(96540);const i={},s=t.createContext(i);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);