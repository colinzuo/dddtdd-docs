"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[25580],{93197:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});var i=s(74848),r=s(28453);const a={},d="Models",t={id:"programming-languages/python/libs/pydantic/models",title:"Models",description:"Basic model usage",source:"@site/docs/00400-programming-languages/python/libs/pydantic/010-models.md",sourceDirName:"00400-programming-languages/python/libs/pydantic",slug:"/programming-languages/python/libs/pydantic/models",permalink:"/dddtdd-docs/programming-languages/python/libs/pydantic/models",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1734870983e3,sidebarPosition:10,frontMatter:{},sidebar:"docSidebar",previous:{title:"10 minutes to pandas",permalink:"/dddtdd-docs/programming-languages/python/libs/pandas/user_guide/0100-10min"},next:{title:"Fields",permalink:"/dddtdd-docs/programming-languages/python/libs/pydantic/fields"}},o={},l=[{value:"Basic model usage",id:"basic-model-usage",level:2},{value:"Model methods and properties",id:"model-methods-and-properties",level:3},{value:"Arbitrary class instances",id:"arbitrary-class-instances",level:2},{value:"Error handling",id:"error-handling",level:2},{value:"Generic models",id:"generic-models",level:2},{value:"Serialization of unparametrized type variables",id:"serialization-of-unparametrized-type-variables",level:3},{value:"RootModel and custom root types",id:"rootmodel-and-custom-root-types",level:2},{value:"Fields with non-hashable default values",id:"fields-with-non-hashable-default-values",level:2},{value:"Attribute copies",id:"attribute-copies",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"models",children:"Models"}),"\n",(0,i.jsx)(n.h2,{id:"basic-model-usage",children:"Basic model usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"from pydantic import BaseModel\r\n\r\n\r\nclass User(BaseModel):\r\n    id: int\r\n    name: str = 'Jane Doe'\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"user = User(id='123')\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"assert user.model_dump() == {'id': 123, 'name': 'Jane Doe'}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Calling ",(0,i.jsx)(n.code,{children:"dict"})," on the instance will also provide a dictionary, but nested fields will not be recursively converted into dictionaries. ",(0,i.jsx)(n.code,{children:"model_dump"})," also provides numerous arguments to customize the serialization result"]}),"\n",(0,i.jsx)(n.h3,{id:"model-methods-and-properties",children:"Model methods and properties"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_validate()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_validate_json()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_construct()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_dump()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_dump_json()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_copy()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_json_schema()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_fields"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_computed_fields"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_extra"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_fields_set"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_parametrized_name()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_post_init()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"model_rebuild()"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"arbitrary-class-instances",children:"Arbitrary class instances"}),"\n",(0,i.jsxs)(n.p,{children:["Pydantic models can also be created from arbitrary class instances by ",(0,i.jsx)(n.strong,{children:"reading the instance attributes"})," corresponding to the model field names. One common application of this functionality is integration with ",(0,i.jsx)(n.strong,{children:"object-relational mappings (ORMs)"})]}),"\n",(0,i.jsxs)(n.p,{children:["To do this, set the ",(0,i.jsx)(n.code,{children:"from_attributes"})," config value to True (see the documentation on Configuration for more details)"]}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsxs)(n.p,{children:["Pydantic will raise a ",(0,i.jsx)(n.code,{children:"ValidationError"})," exception whenever it finds an error in the data it's validating"]}),"\n",(0,i.jsx)(n.h2,{id:"generic-models",children:"Generic models"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Declare a pydantic model that inherits from ",(0,i.jsx)(n.code,{children:"BaseModel"})," and ",(0,i.jsx)(n.code,{children:"typing.Generic"})," (in this specific order), and add the list of type variables you declared previously as parameters to the ",(0,i.jsx)(n.code,{children:"Generic"})," parent"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"from typing import Generic, List, Optional, TypeVar\r\n\r\nfrom pydantic import BaseModel, ValidationError\r\n\r\nDataT = TypeVar('DataT')  \r\n\r\n\r\nclass DataModel(BaseModel):\r\n    numbers: List[int]\r\n    people: List[str]\r\n\r\n\r\nclass Response(BaseModel, Generic[DataT]):  \r\n    data: Optional[DataT] = None  \r\n\r\n\r\nprint(Response[int](data=1))\r\n#> data=1\r\nprint(Response[str](data='value'))\r\n#> data='value'\r\nprint(Response[str](data='value').model_dump())\r\n#> {'data': 'value'}\r\n\r\ndata = DataModel(numbers=[1, 2, 3], people=[])\r\nprint(Response[DataModel](data=data).model_dump())\r\n#> {'data': {'numbers': [1, 2, 3], 'people': []}}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Internally, Pydantic creates subclasses of the generic model at runtime when the generic model class is parametrized. These classes are cached, so there should be minimal overhead introduced by the use of generics models."})}),"\n",(0,i.jsx)(n.h3,{id:"serialization-of-unparametrized-type-variables",children:"Serialization of unparametrized type variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"from pydantic import BaseModel, SerializeAsAny\r\n\r\nclass SerializeAsAnyError(BaseModel, Generic[ErrorDataT]):\r\n    message: str\r\n    details: SerializeAsAny[ErrorDataT]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rootmodel-and-custom-root-types",children:"RootModel and custom root types"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"from pydantic import RootModel\r\n\r\nPets = RootModel[list[str]]\r\nPetsByName = RootModel[dict[str, str]]\r\n\r\n\r\nprint(Pets(['dog', 'cat']))\r\n#> root=['dog', 'cat']\r\nprint(Pets(['dog', 'cat']).model_dump_json())\r\n#> [\"dog\",\"cat\"]\r\nprint(Pets.model_validate(['dog', 'cat']))\r\n#> root=['dog', 'cat']\n"})}),"\n",(0,i.jsx)(n.h2,{id:"fields-with-non-hashable-default-values",children:"Fields with non-hashable default values"}),"\n",(0,i.jsxs)(n.p,{children:["Pydantic also supports the use of a ",(0,i.jsx)(n.code,{children:"default_factory"})," for non-hashable default values, but it is not required. In the event that the default value is not hashable, Pydantic will ",(0,i.jsx)(n.strong,{children:"deepcopy"})," the default value when creating each instance of the model"]}),"\n",(0,i.jsx)(n.h2,{id:"attribute-copies",children:"Attribute copies"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["There are some situations where Pydantic does not copy attributes, such as when passing models \u2014 ",(0,i.jsx)(n.strong,{children:"we use the model as is"}),". You can override this behaviour by setting ",(0,i.jsx)(n.code,{children:"model_config['revalidate_instances'] = 'always'"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>t});var i=s(96540);const r={},a=i.createContext(r);function d(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);