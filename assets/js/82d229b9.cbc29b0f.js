"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[1231],{30126:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var s=t(74848),a=t(28453);const o={title:"\u8d26\u6237"},r=void 0,l={id:"middleware/mysql/account",title:"\u8d26\u6237",description:"account-names",source:"@site/docs/00600-middleware/mysql/020-account.md",sourceDirName:"00600-middleware/mysql",slug:"/middleware/mysql/account",permalink:"/dddtdd-docs/middleware/mysql/account",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:20,frontMatter:{title:"\u8d26\u6237"},sidebar:"docSidebar",previous:{title:"deployment",permalink:"/dddtdd-docs/middleware/mysql/deployment"},next:{title:"db-setup",permalink:"/dddtdd-docs/middleware/mysql/db-setup"}},c={},i=[{value:"account-names",id:"account-names",level:2},{value:"Alter User",id:"alter-user",level:2},{value:"The Default Authentication Plugin",id:"the-default-authentication-plugin",level:3},{value:"Password",id:"password",level:2},{value:"User and Grant",id:"user-and-grant",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"account-names",children:"account-names"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/account-names.html",children:"https://dev.mysql.com/doc/refman/8.0/en/account-names.html"})}),"\n",(0,s.jsx)(n.p,{children:"MySQL account names consist of a user name and a host name, which enables creation of distinct accounts for users with the same user name who connect from different hosts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Account name syntax is 'user_name'@'host_name'"}),"\n",(0,s.jsx)(n.li,{children:"The @'host_name' part is optional. An account name consisting only of a user name is equivalent to 'user_name'@'%'"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"MySQL stores account names in grant tables in the mysql system database using separate columns for the user name and host name parts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"For access-checking purposes, comparisons of User values are case-sensitive. Comparisons of Host values are not case-sensitive"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"alter-user",children:"Alter User"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/alter-user.html",children:"https://dev.mysql.com/doc/refman/8.0/en/alter-user.html"})}),"\n",(0,s.jsx)(n.p,{children:"For each affected account, ALTER USER modifies the corresponding row in the mysql.user system table to reflect the properties specified in the statement. Unspecified properties retain their current values"}),"\n",(0,s.jsxs)(n.p,{children:["For ALTER USER syntax that permits an auth_option value to follow a user value, ",(0,s.jsx)(n.strong,{children:"auth_option"})," indicates how the account authenticates by specifying an ",(0,s.jsx)(n.strong,{children:"account authentication plugin"}),", credentials (for example, a password), or both"]}),"\n",(0,s.jsx)(n.h3,{id:"the-default-authentication-plugin",children:"The Default Authentication Plugin"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/pluggable-authentication.html#pluggable-authentication-default-plugin",children:"https://dev.mysql.com/doc/refman/8.0/en/pluggable-authentication.html#pluggable-authentication-default-plugin"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SHOW VARIABLES LIKE '%default_authentication%';\n\n# default_authentication_plugin\tmysql_native_password\n"})}),"\n",(0,s.jsx)(n.h2,{id:"password",children:"Password"}),"\n",(0,s.jsxs)(n.p,{children:["Assigning a new ",(0,s.jsx)(n.code,{children:"root"}),"@localhost` password"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mysql> ALTER USER \u2018root\u2019@\u2018localhost\u2019 IDENTIFIED BY \u2018new-password\u2019;\n\nALTER USER user\n  IDENTIFIED WITH caching_sha2_password\n  BY 'password';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"user-and-grant",children:"User and Grant"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/creating-accounts.html",children:"https://dev.mysql.com/doc/refman/8.0/en/creating-accounts.html"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CREATE USER 'rcusim'@'localhost'\n  IDENTIFIED BY 'brysjhhrhl!';\nGRANT ALL\n  ON rcusim.*\n  TO 'rcusim'@'localhost'\n  WITH GRANT OPTION;\n\nCREATE USER 'rcusim'@'%'\n  IDENTIFIED BY 'brysjhhrhl!';\nGRANT ALL\n  ON rcusim.*\n  TO 'rcusim'@'%'\n  WITH GRANT OPTION;\n\nREVOKE ALL\n  ON *.*\n  FROM 'finley'@'%.example.com';\n\nDROP USER 'finley'@'localhost';\n\nmysql> CREATE USER \u2018lig\u2019@\u2018localhost\u2019 IDENTIFIED BY \u2018S3cr3t\u2019;\n\nmysql> SHOW GRANTS;\n\nmysql> SHOW GRANTS FOR 'test'@'localhost';\n\nmysql> REVOKE DELETE ON test.t1 FROM 'test'@'localhost';\n\nmysql> REVOKE USAGE ON *.* FROM 'test'@'localhost';\n\nGRANT ALL ON menagerie.* TO 'your_mysql_name'@'your_client_host';\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"GRANT OPTION"}),"\n",(0,s.jsx)(n.p,{children:"Enables you to grant to or revoke from other users those privileges that you yourself possess."}),"\n",(0,s.jsx)(n.p,{children:"To specify an anonymous user in SQL statements, use a quoted empty user name part, such as ''@'localhost'."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(96540);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);