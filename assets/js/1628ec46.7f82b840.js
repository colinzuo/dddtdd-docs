"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[2954],{7634:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>g,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=i(74848),s=i(28453);const a={title:"Single-sourcing the package version"},r=void 0,o={id:"programming-languages/python/packaging/guides/single-sourcing-package-version",title:"Single-sourcing the package version",description:"",source:"@site/docs/00400-programming-languages/python/packaging/guides/070-single-sourcing-package-version.md",sourceDirName:"00400-programming-languages/python/packaging/guides",slug:"/programming-languages/python/packaging/guides/single-sourcing-package-version",permalink:"/dddtdd-docs/programming-languages/python/packaging/guides/single-sourcing-package-version",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:70,frontMatter:{title:"Single-sourcing the package version"},sidebar:"docSidebar",previous:{title:"Including files in source distributions with MANIFEST.in",permalink:"/dddtdd-docs/programming-languages/python/packaging/guides/using-manifest-in"},next:{title:"Packaging binary extensions",permalink:"/dddtdd-docs/programming-languages/python/packaging/guides/packaging-binary-extensions"}},g={},c=[];function p(n){const e={code:"code",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import codecs\nimport os.path\n\ndef read(rel_path):\n    here = os.path.abspath(os.path.dirname(__file__))\n    with codecs.open(os.path.join(here, rel_path), 'r') as fp:\n        return fp.read()\n\ndef get_version(rel_path):\n    for line in read(rel_path).splitlines():\n        if line.startswith('__version__'):\n            delim = '\"' if '\"' in line else \"'\"\n            return line.split(delim)[1]\n    else:\n        raise RuntimeError(\"Unable to find version string.\")\n\nsetup(\n   ...\n   version=get_version(\"package/__init__.py\")\n   ...\n)\n"})})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>o});var t=i(96540);const s={},a=t.createContext(s);function r(n){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);