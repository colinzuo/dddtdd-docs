"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[54325],{23301:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=t(74848),d=t(28453);const r={},l="Component v-model",s={id:"frontend/vue3/core/components-in-depth/component-v-model",title:"Component v-model",description:"Basic Usage",source:"@site/docs/00200-frontend/vue3/010-core/012-components-in-depth/040-component-v-model.md",sourceDirName:"00200-frontend/vue3/010-core/012-components-in-depth",slug:"/frontend/vue3/core/components-in-depth/component-v-model",permalink:"/dddtdd-docs/frontend/vue3/core/components-in-depth/component-v-model",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:40,frontMatter:{},sidebar:"docSidebar",previous:{title:"Component Events",permalink:"/dddtdd-docs/frontend/vue3/core/components-in-depth/events"},next:{title:"Fallthrough Attributes",permalink:"/dddtdd-docs/frontend/vue3/core/components-in-depth/fallthrough-attributes"}},i={},c=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Under the Hood",id:"under-the-hood",level:3},{value:"v-model arguments",id:"v-model-arguments",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"component-v-model",children:"Component v-model"}),"\n",(0,o.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,o.jsxs)(n.p,{children:["Starting in Vue 3.4, the recommended approach to achieve this is using the ",(0,o.jsx)(n.code,{children:"defineModel()"})," macro"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'\x3c!-- Child.vue --\x3e\r\n<script setup>\r\nconst model = defineModel()\r\n\r\nfunction update() {\r\n  model.value++\r\n}\r\n<\/script>\r\n\r\n<template>\r\n  <div>Parent bound v-model is: {{ model }}</div>\r\n  <button @click="update">Increment</button>\r\n</template>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The value returned by ",(0,o.jsx)(n.code,{children:"defineModel()"})," is a ",(0,o.jsx)(n.code,{children:"ref"}),". It can be accessed and mutated like any other ref, except that it acts as a two-way binding between a parent value and a local one"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Its ",(0,o.jsx)(n.code,{children:".value"})," is synced with the value bound by the parent ",(0,o.jsx)(n.code,{children:"v-model"})]}),"\n",(0,o.jsx)(n.li,{children:"When it is mutated by the child, it causes the parent bound value to be updated as well"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"under-the-hood",children:"Under the Hood"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"defineModel"})," is a convenience macro. The compiler expands it to the following"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A prop named ",(0,o.jsx)(n.code,{children:"modelValue"}),", which the local ref's value is synced with"]}),"\n",(0,o.jsxs)(n.li,{children:["An event named ",(0,o.jsx)(n.code,{children:"update:modelValue"}),", which is emitted when the local ref's value is mutated"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'\x3c!-- Child.vue --\x3e\r\n<script setup>\r\nconst props = defineProps([\'modelValue\'])\r\nconst emit = defineEmits([\'update:modelValue\'])\r\n<\/script>\r\n\r\n<template>\r\n  <input\r\n    :value="props.modelValue"\r\n    @input="emit(\'update:modelValue\', $event.target.value)"\r\n  />\r\n</template>\r\n\r\n\x3c!-- Parent.vue --\x3e\r\n<Child\r\n  :modelValue="foo"\r\n  @update:modelValue="$event => (foo = $event)"\r\n/>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"v-model-arguments",children:"v-model arguments"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'<MyComponent v-model:title="bookTitle" />\r\n\r\n\x3c!-- MyComponent.vue --\x3e\r\n<script setup>\r\nconst title = defineModel(\'title\')\r\n<\/script>\r\n\r\n<template>\r\n  <input type="text" v-model="title" />\r\n</template>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var o=t(96540);const d={},r=o.createContext(d);function l(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);