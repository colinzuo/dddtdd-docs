"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[5375],{61456:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>j});var t=c(74848),i=c(28453);const s={title:"Type Objects"},r=void 0,l={id:"programming-languages/python/c-api/typeobj",title:"Type Objects",description:"Quick Reference",source:"@site/docs/00400-programming-languages/python/c-api/1180-typeobj.md",sourceDirName:"00400-programming-languages/python/c-api",slug:"/programming-languages/python/c-api/typeobj",permalink:"/dddtdd-docs/programming-languages/python/c-api/typeobj",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:1180,frontMatter:{title:"Type Objects"},sidebar:"docSidebar",previous:{title:"Common Object Structures",permalink:"/dddtdd-docs/programming-languages/python/c-api/structures"},next:{title:"Supporting Cyclic Garbage Collection",permalink:"/dddtdd-docs/programming-languages/python/c-api/gcsupport"}},d={},j=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"tp slots",id:"tp-slots",level:3},{value:"sub-slots",id:"sub-slots",level:3},{value:"slot typedefs",id:"slot-typedefs",level:3},{value:"PyTypeObject Definition",id:"pytypeobject-definition",level:2},{value:"PyObject Slots",id:"pyobject-slots",level:2},{value:"PyVarObject Slots",id:"pyvarobject-slots",level:2},{value:"PyTypeObject Slots",id:"pytypeobject-slots",level:2},{value:"Static Types",id:"static-types",level:2},{value:"Heap Types",id:"heap-types",level:2},{value:"Number Object Structures",id:"number-object-structures",level:2},{value:"Mapping Object Structures",id:"mapping-object-structures",level:2},{value:"Sequence Object Structures",id:"sequence-object-structures",level:2},{value:"Buffer Object Structures",id:"buffer-object-structures",level:2},{value:"Async Object Structures",id:"async-object-structures",level:2},{value:"Slot Type typedefs",id:"slot-type-typedefs",level:2}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,t.jsx)(n.h3,{id:"tp-slots",children:"tp slots"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_name"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_basicsize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_itemsize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_dealloc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_vectorcall_offset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_as_async"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_repr"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_as_number"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_as_sequence"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_as_mapping"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_hash"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_call"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_str"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_getattro"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_setattro"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_as_buffer"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_flags"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_doc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_traverse"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_clear"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_richcompare"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_weaklistoffset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_iter"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_iternext"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_methods"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_members"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_getset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_base"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_dict"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_descr_get"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_descr_set"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_dictoffset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_init"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_alloc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_new"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_free"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_is_gc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"<tp_bases>"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"<tp_mro>"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_finalize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tp_vectorcall"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sub-slots",children:"sub-slots"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"am_await"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"am_aiter"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"am_anext"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"am_send"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"nb_add"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"nb_inplace_add"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"mp_length"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"mp_subscript"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"mp_ass_subscript"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_length"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_concat"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_repeat"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_item"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_ass_item"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_contains"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_inplace_concat"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sq_inplace_repeat"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"bf_getbuffer"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"bf_releasebuffer"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"slot-typedefs",children:"slot typedefs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"allocfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"destructor"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"freefunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"traverseproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"newfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"initproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"reprfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getattrfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"setattrfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getattrofunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"setattrofunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"descrgetfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"descrsetfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"hashfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"richcmpfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getiterfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"iternextfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"lenfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getbufferproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"releasebufferproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"inquiry"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"unaryfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"binaryfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ternaryfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ssizeargfunc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ssizeobjargproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"objobjproc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"objobjargproc"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pytypeobject-definition",children:"PyTypeObject Definition"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:'typedef struct _typeobject {\n    PyObject_VAR_HEAD\n    const char *tp_name; /* For printing, in format "<module>.<name>" */\n    Py_ssize_t tp_basicsize, tp_itemsize; /* For allocation */\n\n    /* Methods to implement standard operations */\n\n    destructor tp_dealloc;\n    Py_ssize_t tp_vectorcall_offset;\n    getattrfunc tp_getattr;\n    setattrfunc tp_setattr;\n    PyAsyncMethods *tp_as_async; /* formerly known as tp_compare (Python 2)\n                                    or tp_reserved (Python 3) */\n    reprfunc tp_repr;\n\n    /* Method suites for standard classes */\n\n    PyNumberMethods *tp_as_number;\n    PySequenceMethods *tp_as_sequence;\n    PyMappingMethods *tp_as_mapping;\n\n    /* More standard operations (here for binary compatibility) */\n\n    hashfunc tp_hash;\n    ternaryfunc tp_call;\n    reprfunc tp_str;\n    getattrofunc tp_getattro;\n    setattrofunc tp_setattro;\n\n    /* Functions to access object as input/output buffer */\n    PyBufferProcs *tp_as_buffer;\n\n    /* Flags to define presence of optional/expanded features */\n    unsigned long tp_flags;\n\n    const char *tp_doc; /* Documentation string */\n\n    /* Assigned meaning in release 2.0 */\n    /* call function for all accessible objects */\n    traverseproc tp_traverse;\n\n    /* delete references to contained objects */\n    inquiry tp_clear;\n\n    /* Assigned meaning in release 2.1 */\n    /* rich comparisons */\n    richcmpfunc tp_richcompare;\n\n    /* weak reference enabler */\n    Py_ssize_t tp_weaklistoffset;\n\n    /* Iterators */\n    getiterfunc tp_iter;\n    iternextfunc tp_iternext;\n\n    /* Attribute descriptor and subclassing stuff */\n    struct PyMethodDef *tp_methods;\n    struct PyMemberDef *tp_members;\n    struct PyGetSetDef *tp_getset;\n    // Strong reference on a heap type, borrowed reference on a static type\n    struct _typeobject *tp_base;\n    PyObject *tp_dict;\n    descrgetfunc tp_descr_get;\n    descrsetfunc tp_descr_set;\n    Py_ssize_t tp_dictoffset;\n    initproc tp_init;\n    allocfunc tp_alloc;\n    newfunc tp_new;\n    freefunc tp_free; /* Low-level free-memory routine */\n    inquiry tp_is_gc; /* For PyObject_IS_GC */\n    PyObject *tp_bases;\n    PyObject *tp_mro; /* method resolution order */\n    PyObject *tp_cache;\n    PyObject *tp_subclasses;\n    PyObject *tp_weaklist;\n    destructor tp_del;\n\n    /* Type attribute cache version tag. Added in version 2.6 */\n    unsigned int tp_version_tag;\n\n    destructor tp_finalize;\n    vectorcallfunc tp_vectorcall;\n} PyTypeObject;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"pyobject-slots",children:"PyObject Slots"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyObject.ob_refcnt"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyTypeObject *PyObject.ob_type"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pyvarobject-slots",children:"PyVarObject Slots"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyVarObject.ob_size"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pytypeobject-slots",children:"PyTypeObject Slots"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"const char *PyTypeObject.tp_name"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyTypeObject.tp_basicsize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyTypeObject.tp_itemsize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"destructor PyTypeObject.tp_dealloc"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"static void foo_dealloc(foo_object *self) {\n    PyObject_GC_UnTrack(self);\n    Py_CLEAR(self->ref);\n    Py_TYPE(self)->tp_free((PyObject *)self);\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyTypeObject.tp_vectorcall_offset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"reprfunc PyTypeObject.tp_repr"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyNumberMethods *PyTypeObject.tp_as_number"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PySequenceMethods *PyTypeObject.tp_as_sequence"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyMappingMethods *PyTypeObject.tp_as_mapping"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"hashfunc PyTypeObject.tp_hash"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ternaryfunc PyTypeObject.tp_call"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"reprfunc PyTypeObject.tp_str"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getattrofunc PyTypeObject.tp_getattro"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"setattrofunc PyTypeObject.tp_setattro"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyBufferProcs *PyTypeObject.tp_as_buffer"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"unsigned long PyTypeObject.tp_flags"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"const char *PyTypeObject.tp_doc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"traverseproc PyTypeObject.tp_traverse"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"inquiry PyTypeObject.tp_clear"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"richcmpfunc PyTypeObject.tp_richcompare"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyTypeObject.tp_weaklistoffset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"getiterfunc PyTypeObject.tp_iter"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"iternextfunc PyTypeObject.tp_iternext"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"struct PyMethodDef *PyTypeObject.tp_methods"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"struct PyMemberDef *PyTypeObject.tp_members"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"struct PyGetSetDef *PyTypeObject.tp_getset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyTypeObject *PyTypeObject.tp_base"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyObject *PyTypeObject.tp_dict"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"descrgetfunc PyTypeObject.tp_descr_get"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"descrsetfunc PyTypeObject.tp_descr_set"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Py_ssize_t PyTypeObject.tp_dictoffset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"initproc PyTypeObject.tp_init"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"allocfunc PyTypeObject.tp_alloc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"newfunc PyTypeObject.tp_new"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"freefunc PyTypeObject.tp_free"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyObject *PyTypeObject.tp_bases"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyObject *PyTypeObject.tp_mro"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"PyObject *PyTypeObject.tp_subclasses"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"static-types",children:"Static Types"}),"\n",(0,t.jsxs)(n.p,{children:["Traditionally, types defined in C code are static, that is, a static PyTypeObject structure is defined directly in code and initialized using ",(0,t.jsx)(n.code,{children:"PyType_Ready()"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Static types are limited to one base, i.e. they cannot use multiple inheritance."}),"\n",(0,t.jsx)(n.li,{children:"Static type objects (but not necessarily their instances) are immutable. It is not possible to add or modify the type object\u2019s attributes from Python."}),"\n",(0,t.jsx)(n.li,{children:"Static type objects are shared across sub-interpreters, so they should not include any subinterpreter-specific state."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"heap-types",children:"Heap Types"}),"\n",(0,t.jsxs)(n.p,{children:["An alternative to static types is heap-allocated types, or heap types for short, which correspond closely to classes created by Python\u2019s class statement. Heap types have the ",(0,t.jsx)(n.code,{children:"Py_TPFLAGS_HEAPTYPE"})," flag set."]}),"\n",(0,t.jsxs)(n.p,{children:["This is done by filling a ",(0,t.jsx)(n.code,{children:"PyType_Spec"})," structure and calling ",(0,t.jsx)(n.code,{children:"PyType_FromSpec()"}),", PyType_FromSpecWithBases(), or PyType_FromModuleAndSpec()."]}),"\n",(0,t.jsx)(n.h2,{id:"number-object-structures",children:"Number Object Structures"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",metastring:'title="type PyNumberMethods"',children:"typedef struct {\n     binaryfunc nb_add;\n     binaryfunc nb_subtract;\n     binaryfunc nb_multiply;\n     binaryfunc nb_remainder;\n     binaryfunc nb_divmod;\n     ternaryfunc nb_power;\n     unaryfunc nb_negative;\n     unaryfunc nb_positive;\n     unaryfunc nb_absolute;\n     inquiry nb_bool;\n     unaryfunc nb_invert;\n     binaryfunc nb_lshift;\n     binaryfunc nb_rshift;\n     binaryfunc nb_and;\n     binaryfunc nb_xor;\n     binaryfunc nb_or;\n     unaryfunc nb_int;\n     void *nb_reserved;\n     unaryfunc nb_float;\n\n     binaryfunc nb_inplace_add;\n     binaryfunc nb_inplace_subtract;\n     binaryfunc nb_inplace_multiply;\n     binaryfunc nb_inplace_remainder;\n     ternaryfunc nb_inplace_power;\n     binaryfunc nb_inplace_lshift;\n     binaryfunc nb_inplace_rshift;\n     binaryfunc nb_inplace_and;\n     binaryfunc nb_inplace_xor;\n     binaryfunc nb_inplace_or;\n\n     binaryfunc nb_floor_divide;\n     binaryfunc nb_true_divide;\n     binaryfunc nb_inplace_floor_divide;\n     binaryfunc nb_inplace_true_divide;\n\n     unaryfunc nb_index;\n\n     binaryfunc nb_matrix_multiply;\n     binaryfunc nb_inplace_matrix_multiply;\n} PyNumberMethods;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"mapping-object-structures",children:"Mapping Object Structures"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"type PyMappingMethods"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"lenfunc PyMappingMethods.mp_length"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"binaryfunc PyMappingMethods.mp_subscript"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"objobjargproc PyMappingMethods.mp_ass_subscript"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"sequence-object-structures",children:"Sequence Object Structures"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"type PySequenceMethods"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"buffer-object-structures",children:"Buffer Object Structures"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"type PyBufferProcs"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"async-object-structures",children:"Async Object Structures"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"type PyAsyncMethods"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"slot-type-typedefs",children:"Slot Type typedefs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*allocfunc)(PyTypeObject *cls, Py_ssize_t nitems)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef void (*destructor)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef void (*freefunc)(void*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*newfunc)(PyObject*, PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*initproc)(PyObject*, PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*reprfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*getattrfunc)(PyObject *self, char *attr)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*setattrfunc)(PyObject *self, char *attr, PyObject *value)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*getattrofunc)(PyObject *self, PyObject *attr)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*setattrofunc)(PyObject *self, PyObject *attr, PyObject *value)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*descrgetfunc)(PyObject*, PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*descrsetfunc)(PyObject*, PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef Py_hash_t (*hashfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*richcmpfunc)(PyObject*, PyObject*, int)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*getiterfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*iternextfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef Py_ssize_t (*lenfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*getbufferproc)(PyObject*, Py_buffer*, int)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef void (*releasebufferproc)(PyObject*, Py_buffer*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*unaryfunc)(PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*binaryfunc)(PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PySendResult (*sendfunc)(PyObject*, PyObject*, PyObject**)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*ternaryfunc)(PyObject*, PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef PyObject *(*ssizeargfunc)(PyObject*, Py_ssize_t)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*ssizeobjargproc)(PyObject*, Py_ssize_t, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*objobjproc)(PyObject*, PyObject*)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"typedef int (*objobjargproc)(PyObject*, PyObject*, PyObject*)"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,n,c)=>{c.d(n,{R:()=>r,x:()=>l});var t=c(96540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);