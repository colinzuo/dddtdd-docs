"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[2556],{38681:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>p});var i=t(74848),a=t(28453);const s={title:"Packaging Python Projects"},r=void 0,o={id:"programming-languages/python/packaging/tutorials/packaging-projects",title:"Packaging Python Projects",description:"A simple project",source:"@site/docs/00400-programming-languages/python/packaging/tutorials/030-packaging-projects.md",sourceDirName:"00400-programming-languages/python/packaging/tutorials",slug:"/programming-languages/python/packaging/tutorials/packaging-projects",permalink:"/dddtdd-docs/programming-languages/python/packaging/tutorials/packaging-projects",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:30,frontMatter:{title:"Packaging Python Projects"},sidebar:"docSidebar",previous:{title:"Managing Application Dependencies",permalink:"/dddtdd-docs/programming-languages/python/packaging/tutorials/managing-dependencies"},next:{title:"Installing packages using pip and virtual environments",permalink:"/dddtdd-docs/programming-languages/python/packaging/guides/installing-using-pip-and-virtual-environments"}},l={},p=[{value:"A simple project",id:"a-simple-project",level:2},{value:"Creating the package files",id:"creating-the-package-files",level:2},{value:"Creating a test directory",id:"creating-a-test-directory",level:3},{value:"Creating pyproject.toml",id:"creating-pyprojecttoml",level:3},{value:"Configuring metadata",id:"configuring-metadata",level:3},{value:"Including other files",id:"including-other-files",level:3},{value:"Generating distribution archives",id:"generating-distribution-archives",level:2},{value:"Uploading the distribution archives",id:"uploading-the-distribution-archives",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"a-simple-project",children:"A simple project"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"packaging_tutorial/\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 example_package/\n        \u251c\u2500\u2500 __init__.py\n        \u2514\u2500\u2500 example.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-package-files",children:"Creating the package files"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"packaging_tutorial/\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 setup.cfg\n\u251c\u2500\u2500 src/\n\u2502\xa0\xa0 \u2514\u2500\u2500 example_package/\n\u2502\xa0\xa0     \u251c\u2500\u2500 __init__.py\n\u2502\xa0\xa0     \u2514\u2500\u2500 example.py\n\u2514\u2500\u2500 tests/\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-test-directory",children:"Creating a test directory"}),"\n",(0,i.jsx)(n.h3,{id:"creating-pyprojecttoml",children:"Creating pyproject.toml"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://peps.python.org/pep-0518/",children:"https://peps.python.org/pep-0518/"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[build-system]\nrequires = ["setuptools>=42"]\nbuild-backend = "setuptools.build_meta"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"configuring-metadata",children:"Configuring metadata"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Static metadata (setup.cfg)"}),"\n",(0,i.jsx)(n.li,{children:"Dynamic metadata (setup.py)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Static metadata (setup.cfg) should be preferred. Dynamic metadata (setup.py) should be used only as an escape hatch when absolutely necessary. setup.py used to be required, but can be omitted with newer versions of setuptools and pip"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'import setuptools\n\nwith open("README.md", "r", encoding="utf-8") as fh:\n    long_description = fh.read()\n\nsetuptools.setup(\n    name="example-package-YOUR-USERNAME-HERE",\n    version="0.0.1",\n    author="Example Author",\n    author_email="author@example.com",\n    description="A small example package",\n    long_description=long_description,\n    long_description_content_type="text/markdown",\n    url="https://github.com/pypa/sampleproject",\n    project_urls={\n        "Bug Tracker": "https://github.com/pypa/sampleproject/issues",\n    },\n    classifiers=[\n        "Programming Language :: Python :: 3",\n        "License :: OSI Approved :: MIT License",\n        "Operating System :: OS Independent",\n    ],\n    package_dir={"": "src"},\n    packages=setuptools.find_packages(where="src"),\n    python_requires=">=3.6",\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"including-other-files",children:"Including other files"}),"\n",(0,i.jsx)(n.p,{children:"The files listed above will be included automatically in your source distribution. If you want to control what goes in this explicitly, see Including files in source distributions with MANIFEST.in."}),"\n",(0,i.jsx)(n.p,{children:"The final built distribution will have the Python files in the discovered or listed Python packages. If you want to control what goes here, such as to add data files, see Including Data Files from the setuptools docs."}),"\n",(0,i.jsx)(n.h2,{id:"generating-distribution-archives",children:"Generating distribution archives"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"python3 -m pip install --upgrade build\n\npython3 -m build\n\ndist/\n  example-package-YOUR-USERNAME-HERE-0.0.1-py3-none-any.whl\n  example-package-YOUR-USERNAME-HERE-0.0.1.tar.gz\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"tar.gz"})," file is a source distribution whereas the ",(0,i.jsx)(n.code,{children:".whl"})," file is a built distribution"]}),"\n",(0,i.jsx)(n.p,{children:"You should always upload a source distribution and provide built distributions for the platforms your project is compatible with"}),"\n",(0,i.jsx)(n.h2,{id:"uploading-the-distribution-archives",children:"Uploading the distribution archives"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"python3 -m pip install --upgrade twine\n\npython3 -m twine upload --repository testpypi dist/*\n\npython3 -m pip install --index-url https://test.pypi.org/simple/ --no-deps example-package-YOUR-USERNAME-HERE\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(96540);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);