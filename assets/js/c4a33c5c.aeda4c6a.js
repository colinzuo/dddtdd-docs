"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[40744],{68562:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>g,frontMatter:()=>t,metadata:()=>d,toc:()=>a});var n=o(74848),s=o(28453);const t={},i=void 0,d={id:"topic/api-design/error",title:"error",description:"google",source:"@site/docs/00800-topic/api-design/010-error.md",sourceDirName:"00800-topic/api-design",slug:"/topic/api-design/error",permalink:"/dddtdd-docs/topic/api-design/error",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:10,frontMatter:{},sidebar:"docSidebar",previous:{title:"\u4e13\u9898\u4ecb\u7ecd",permalink:"/dddtdd-docs/topic/"},next:{title:"references",permalink:"/dddtdd-docs/topic/api-design/references"}},l={},a=[{value:"google",id:"google",level:2},{value:"Error Codes",id:"error-codes",level:3},{value:"Propagating Errors",id:"propagating-errors",level:3},{value:"Generating Errors",id:"generating-errors",level:3}];function c(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"google",children:"google"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"https://cloud.google.com/apis/design/errors",children:"https://cloud.google.com/apis/design/errors"})}),"\n",(0,n.jsxs)(r.p,{children:["Because most Google APIs use resource-oriented API design, the error handling follows the same design principle by using a ",(0,n.jsx)(r.strong,{children:"small set of standard errors"})," with a large number of resources."]}),"\n",(0,n.jsxs)(r.p,{children:["When using gRPC, ",(0,n.jsx)(r.strong,{children:"errors are included in the headers"}),", and total headers in responses are limited to 8 KB (8,192 bytes). Ensure that errors do not exceed 1-2 KB in size"]}),"\n",(0,n.jsx)(r.h3,{id:"error-codes",children:"Error Codes"}),"\n",(0,n.jsxs)(r.p,{children:["Google APIs must use the canonical error codes defined by ",(0,n.jsx)(r.code,{children:"google.rpc.Code"}),". Individual APIs ",(0,n.jsx)(r.strong,{children:"must avoid defining additional error codes"}),", since developers are very unlikely to write logic to handle a large number of error codes."]}),"\n",(0,n.jsx)(r.h3,{id:"propagating-errors",children:"Propagating Errors"}),"\n",(0,n.jsxs)(r.p,{children:["If your API service depends on other services, you ",(0,n.jsx)(r.strong,{children:"should not blindly propagate errors"})," from those services to your clients. When translating errors, we suggest the following:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Hide implementation details and confidential information."}),"\n",(0,n.jsxs)(r.li,{children:["Adjust the party responsible for the error. For example, a server that receives an ",(0,n.jsx)(r.code,{children:"INVALID_ARGUMENT"})," error from another service should propagate an ",(0,n.jsx)(r.code,{children:"INTERNAL"})," to its own caller."]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"generating-errors",children:"Generating Errors"}),"\n",(0,n.jsxs)(r.p,{children:["If you are a server developer, you ",(0,n.jsx)(r.strong,{children:"should generate errors with enough information"})," to help client developers understand and resolve the problem."]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"\u5bf95xx\u7cfb\u5217\u95ee\u9898"})}),"\n",(0,n.jsx)(r.p,{children:"Note: Since the client cannot fix the server error, it is not useful to generate additional error details. To avoid leaking sensitive information under error conditions, it is recommended not to generate any error message and only generate google.rpc.DebugInfo error details. The DebugInfo is specially designed only for server-side logging, and must not be sent to client."})]})}function g(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,r,o)=>{o.d(r,{R:()=>i,x:()=>d});var n=o(96540);const s={},t=n.createContext(s);function i(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);