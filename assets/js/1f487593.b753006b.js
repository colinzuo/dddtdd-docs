"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[11686],{93044:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>d,toc:()=>s});var r=t(74848),a=t(28453);const o={},i=void 0,d={id:"programming-languages/golang/gin/gin",title:"gin",description:"type HandlerFunc",source:"@site/docs/00400-programming-languages/golang/gin/0900-gin.md",sourceDirName:"00400-programming-languages/golang/gin",slug:"/programming-languages/golang/gin/gin",permalink:"/dddtdd-docs/programming-languages/golang/gin/gin",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:900,frontMatter:{},sidebar:"docSidebar",previous:{title:"tree",permalink:"/dddtdd-docs/programming-languages/golang/gin/tree"},next:{title:"grpc-libs",permalink:"/dddtdd-docs/programming-languages/golang/grpc/grpc-libs"}},l={},s=[{value:"type HandlerFunc",id:"type-handlerfunc",level:2},{value:"type HandlersChain",id:"type-handlerschain",level:2},{value:"type RouteInfo",id:"type-routeinfo",level:2},{value:"type RoutesInfo",id:"type-routesinfo",level:2},{value:"type Engine",id:"type-engine",level:2},{value:"New",id:"new",level:3},{value:"Default",id:"default",level:3},{value:"NoRoute",id:"noroute",level:3},{value:"addRoute",id:"addroute",level:3},{value:"ServeHTTP",id:"servehttp",level:3},{value:"handleHTTPRequest",id:"handlehttprequest",level:3}];function u(e){const n={code:"code",h2:"h2",h3:"h3",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"type-handlerfunc",children:"type HandlerFunc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// HandlerFunc defines the handler used by gin middleware as return value.\ntype HandlerFunc func(*Context)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-handlerschain",children:"type HandlersChain"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// HandlersChain defines a HandlerFunc slice.\ntype HandlersChain []HandlerFunc\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-routeinfo",children:"type RouteInfo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// RouteInfo represents a request route's specification which contains method and path and its handler.\ntype RouteInfo struct {\n\tMethod      string\n\tPath        string\n\tHandler     string\n\tHandlerFunc HandlerFunc\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-routesinfo",children:"type RoutesInfo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// RoutesInfo defines a RouteInfo slice.\ntype RoutesInfo []RouteInfo\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-engine",children:"type Engine"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// Engine is the framework's instance, it contains the muxer, middleware and configuration settings.\n// Create an instance of Engine, by using New() or Default()\ntype Engine struct {\n\tRouterGroup\n\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"new",children:"New"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'func New() *Engine {\n\tdebugPrintWARNINGNew()\n\tengine := &Engine{\n\t\tRouterGroup: RouterGroup{\n\t\t\tHandlers: nil,\n\t\t\tbasePath: "/",\n\t\t\troot:     true,\n\t\t},\n\n\tengine.RouterGroup.engine = engine\n'})}),"\n",(0,r.jsx)(n.h3,{id:"default",children:"Default"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// Default returns an Engine instance with the Logger and Recovery middleware already attached.\nfunc Default() *Engine {\n\tdebugPrintWARNINGDefault()\n\tengine := New()\n\tengine.Use(Logger(), Recovery())\n\treturn engine\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"noroute",children:"NoRoute"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// NoRoute adds handlers for NoRoute. It returns a 404 code by default.\nfunc (engine *Engine) NoRoute(handlers ...HandlerFunc) {\n\tengine.noRoute = handlers\n\tengine.rebuild404Handlers()\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"addroute",children:"addRoute"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'func (engine *Engine) addRoute(method, path string, handlers HandlersChain) {\n\n\troot := engine.trees.get(method)\n\tif root == nil {\n\t\troot = new(node)\n\t\troot.fullPath = "/"\n\t\tengine.trees = append(engine.trees, methodTree{method: method, root: root})\n\t}\n\troot.addRoute(path, handlers)\n\t\t\n'})}),"\n",(0,r.jsx)(n.h3,{id:"servehttp",children:"ServeHTTP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"// ServeHTTP conforms to the http.Handler interface.\nfunc (engine *Engine) ServeHTTP(w http.ResponseWriter, req *http.Request) {\n\tc := engine.pool.Get().(*Context)\n\tc.writermem.reset(w)\n\tc.Request = req\n\tc.reset()\n\n\tengine.handleHTTPRequest(c)\n\n\tengine.pool.Put(c)\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handlehttprequest",children:"handleHTTPRequest"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func (engine *Engine) handleHTTPRequest(c *Context) {\n\n\t// Find root of the tree for the given HTTP method\n\tt := engine.trees\n\tfor i, tl := 0, len(t); i < tl; i++ {\n\t\tif t[i].method != httpMethod {\n\t\t\tcontinue\n\t\t}\n\t\troot := t[i].root\n\t\t// Find route in tree\n\t\tvalue := root.getValue(rPath, c.params, c.skippedNodes, unescape)\n\t\tif value.params != nil {\n\t\t\tc.Params = *value.params\n\t\t}\n\t\tif value.handlers != nil {\n\t\t\tc.handlers = value.handlers\n\t\t\tc.fullPath = value.fullPath\n\t\t\tc.Next()\n\t\t\tc.writermem.WriteHeaderNow()\n\t\t\treturn\n\t\t}\n\t\t\n\tc.handlers = engine.allNoRoute\n\tserveError(c, http.StatusNotFound, default404Body)\t\t\n"})})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var r=t(96540);const a={},o=r.createContext(a);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);