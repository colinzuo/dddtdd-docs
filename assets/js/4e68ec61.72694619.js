"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[41651],{48633:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>c});var r=n(74848),s=n(28453);const a={title:"Functions"},i=void 0,d={id:"middleware/prometheus/functions",title:"Functions",description:"delta()",source:"@site/docs/00600-middleware/prometheus/0320-functions.md",sourceDirName:"00600-middleware/prometheus",slug:"/middleware/prometheus/functions",permalink:"/dddtdd-docs/middleware/prometheus/functions",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,sidebarPosition:320,frontMatter:{title:"Functions"},sidebar:"docSidebar",previous:{title:"Operators",permalink:"/dddtdd-docs/middleware/prometheus/operators"},next:{title:"Examples",permalink:"/dddtdd-docs/middleware/prometheus/examples"}},o={},c=[{value:"delta()",id:"delta",level:2},{value:"increase()",id:"increase",level:2},{value:"irate()",id:"irate",level:2},{value:"rate()",id:"rate",level:2}];function l(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"delta",children:"delta()"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"delta(v range-vector)"})," calculates the difference between the first and last value of each time series element in a range vector v, returning an instant vector with the given deltas and equivalent labels"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-r",children:'delta(cpu_temp_celsius{host="zeus"}[2h])\n'})}),"\n",(0,r.jsx)(t.h2,{id:"increase",children:"increase()"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"increase(v range-vector)"})," calculates the increase in the time series in the range vector"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-r",children:'increase(http_requests_total{job="api-server"}[5m])\n'})}),"\n",(0,r.jsx)(t.p,{children:"increase should only be used with counters"}),"\n",(0,r.jsxs)(t.p,{children:["It is syntactic sugar for ",(0,r.jsx)(t.code,{children:"rate(v)"})," multiplied by the number of seconds under the specified time range window, and should be used primarily for human readability. Use rate in recording rules so that increases are tracked consistently on a per-second basis."]}),"\n",(0,r.jsx)(t.h2,{id:"irate",children:"irate()"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"irate(v range-vector)"})," calculates the ",(0,r.jsx)(t.strong,{children:"per-second instant rate"})," of increase of the time series in the range vector. This is based on the ",(0,r.jsx)(t.strong,{children:"last two data points"})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-r",children:'irate(http_requests_total{job="api-server"}[5m])\n'})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"irate"})," should only be used when graphing volatile, fast-moving counters. Use ",(0,r.jsx)(t.code,{children:"rate"})," for alerts and slow-moving counters, as brief changes in the rate can reset the FOR clause and graphs consisting entirely of rare spikes are hard to read."]}),"\n",(0,r.jsx)(t.h2,{id:"rate",children:"rate()"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"rate(v range-vector)"})," calculates the per-second average rate of increase of the time series in the range vector"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-r",children:'rate(http_requests_total{job="api-server"}[5m])\n'})}),"\n",(0,r.jsx)(t.p,{children:"rate should only be used with counters"}),"\n",(0,r.jsx)(t.p,{children:"It is best suited for alerting, and for graphing of slow-moving counters"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var r=n(96540);const s={},a=r.createContext(s);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);