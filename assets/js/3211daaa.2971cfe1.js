"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[3925],{20567:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var r=t(74848),o=t(28453);const s={},c="Component Testing Config",i={id:"frontend/cypress/component-testing/component-framework-configuration",title:"Component Testing Config",description:"Custom Index File",source:"@site/docs/00200-frontend/cypress/040-component-testing/040-component-framework-configuration.md",sourceDirName:"00200-frontend/cypress/040-component-testing",slug:"/frontend/cypress/component-testing/component-framework-configuration",permalink:"/dddtdd-docs/frontend/cypress/component-testing/component-framework-configuration",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1721530274e3,sidebarPosition:40,frontMatter:{},sidebar:"docSidebar",previous:{title:"Styling Components",permalink:"/dddtdd-docs/frontend/cypress/component-testing/styling-components"},next:{title:"Component Testing FAQ",permalink:"/dddtdd-docs/frontend/cypress/component-testing/faq"}},d={},p=[{value:"Custom Index File",id:"custom-index-file",level:2},{value:"Custom Dev Server",id:"custom-dev-server",level:2},{value:"Spec Pattern for Component Tests",id:"spec-pattern-for-component-tests",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"component-testing-config",children:"Component Testing Config"}),"\n",(0,r.jsx)(n.h2,{id:"custom-index-file",children:"Custom Index File"}),"\n",(0,r.jsxs)(n.p,{children:["By default, Cypress renders your components into an HTML file located at ",(0,r.jsx)(n.code,{children:"cypress/support/component-index.html"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"{\r\n  component: {\r\n    devServer,\r\n    indexHtmlFile: '/custom/path/to/component-index.html'\r\n  }\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"custom-dev-server",children:"Custom Dev Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { defineConfig } from 'cypress'\r\n\r\nexport default defineConfig({\r\n  component: {\r\n    async devServer({\r\n      specs,\r\n      cypressConfig,\r\n      devServerEvents,\r\n    }: DevServerOptions) {\r\n      const { port, close } = await startDevServer(\r\n        specs,\r\n        cypressConfig,\r\n        devServerEvents\r\n      )\r\n\r\n      return {\r\n        port,\r\n        close,\r\n      }\r\n    },\r\n  },\r\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Any requests triggered during a test using the ",(0,r.jsx)(n.code,{children:"devServerPublicPathRoute"})," as defined in the ",(0,r.jsx)(n.code,{children:"cypressConfig"})," will be forwarded to your server. Cypress will trigger a request for ",(0,r.jsx)(n.code,{children:"[devServerPublicPathRoute]/index.html"})," when a test is started. Your server needs to reply with the html-file referenced in ",(0,r.jsx)(n.code,{children:"cypressConfig.indexHtmlFile"})," and inject a script to load the support files and the actual test"]}),"\n",(0,r.jsxs)(n.p,{children:["For a real-world example, you can refer to this ",(0,r.jsx)(n.a,{href:"https://github.com/cypress-io/cypress/blob/466155c2125476374d9f9549530f67d0c6354a41/npm/vite-dev-server/src/plugins/cypress.ts#L82-L92",children:"loader"})," used by the ",(0,r.jsx)(n.strong,{children:"Vite Dev Server"})]}),"\n",(0,r.jsx)(n.h2,{id:"spec-pattern-for-component-tests",children:"Spec Pattern for Component Tests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"{\r\n  component: {\r\n    specPattern: 'src/**/*.cy.{js,jsx,ts,tsx}'\r\n  }\r\n}\n"})})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var r=t(96540);const o={},s=r.createContext(o);function c(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);