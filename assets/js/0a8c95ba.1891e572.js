"use strict";(self.webpackChunkdoc_center=self.webpackChunkdoc_center||[]).push([[2340],{19865:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=n(74848),s=n(28453);const o={},a=void 0,r={id:"programming-languages/python/pep/2011-0405-Python-Virtual-Environments",title:"2011-0405-Python-Virtual-Environments",description:"Abstract",source:"@site/docs/00400-programming-languages/python/pep/2011-0405-Python-Virtual-Environments.md",sourceDirName:"00400-programming-languages/python/pep",slug:"/programming-languages/python/pep/2011-0405-Python-Virtual-Environments",permalink:"/dddtdd-docs/programming-languages/python/pep/2011-0405-Python-Virtual-Environments",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Colin Zuo",lastUpdatedAt:1720187019e3,frontMatter:{},sidebar:"docSidebar",previous:{title:"2010-0393-Flexible-String-Representation",permalink:"/dddtdd-docs/programming-languages/python/pep/2010-0393-Flexible-String-Representation"},next:{title:"2012-0427-Wheel-Binary-Package-Format-1.0",permalink:"/dddtdd-docs/programming-languages/python/pep/2012-0427-Wheel-Binary-Package-Format-1.0"}},c={},l=[{value:"Abstract",id:"abstract",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Specification",id:"specification",level:2},{value:"Isolation from system site-packages",id:"isolation-from-system-site-packages",level:3},{value:"Creating virtual environments",id:"creating-virtual-environments",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"abstract",children:"Abstract"}),"\n",(0,i.jsx)(t.p,{children:"Each virtual environment has its own Python binary (allowing creation of environments with various Python versions) and can have its own independent set of installed Python packages in its site directories, but shares the standard library with the base installed Python"}),"\n",(0,i.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,i.jsx)(t.p,{children:"Virtualenv must copy the binary in order to provide isolation, as Python dereferences a symlinked executable before searching for sys.prefix."}),"\n",(0,i.jsx)(t.h2,{id:"specification",children:"Specification"}),"\n",(0,i.jsxs)(t.p,{children:["This PEP proposes to add a new first step to this search. If a ",(0,i.jsx)(t.code,{children:"pyvenv.cfg"})," file is found either adjacent to the Python executable or one directory above it (if the executable is a symlink, it is ",(0,i.jsx)(t.strong,{children:"not dereferenced"}),"), this file is scanned for lines of the form key = value. If a home key is found, this signifies that the Python binary belongs to a virtual environment, and the value of the home key is the directory containing the Python executable used to create this virtual environment"]}),"\n",(0,i.jsxs)(t.p,{children:["In this case, prefix-finding continues as normal using the value of the home key as the effective Python binary location, which finds the prefix of the base installation. ",(0,i.jsx)(t.code,{children:"sys.base_prefix"})," is set to this value, while ",(0,i.jsx)(t.code,{children:"sys.prefix"})," is set to the directory containing pyvenv.cfg."]}),"\n",(0,i.jsxs)(t.p,{children:["The site and sysconfig standard-library modules are modified such that the standard library and header files are found relative to ",(0,i.jsx)(t.code,{children:"sys.base_prefix / sys.base_exec_prefix"}),", while site-package directories (\u201cpurelib\u201d and \u201cplatlib\u201d, in sysconfig terms) are still found relative to ",(0,i.jsx)(t.code,{children:"sys.prefix / sys.exec_prefix"})]}),"\n",(0,i.jsxs)(t.p,{children:["Thus, a Python virtual environment in its simplest form would consist of nothing more than a ",(0,i.jsx)(t.strong,{children:"copy or symlink of the Python binary accompanied by a pyvenv.cfg file and a site-packages directory"})]}),"\n",(0,i.jsx)(t.h3,{id:"isolation-from-system-site-packages",children:"Isolation from system site-packages"}),"\n",(0,i.jsxs)(t.p,{children:["If the ",(0,i.jsx)(t.code,{children:"pyvenv.cfg"})," file also contains a key ",(0,i.jsx)(t.code,{children:"include-system-site-packages"})," with a value of true (not case sensitive), the site module will also add the system site directories to ",(0,i.jsx)(t.code,{children:"sys.path"})," after the virtual environment site directories."]}),"\n",(0,i.jsx)(t.h3,{id:"creating-virtual-environments",children:"Creating virtual environments"}),"\n",(0,i.jsxs)(t.p,{children:["This PEP also proposes adding a new ",(0,i.jsx)(t.code,{children:"venv"})," module to the standard library which implements the creation of virtual environments"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(96540);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);